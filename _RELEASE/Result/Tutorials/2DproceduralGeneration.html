<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>vittorio romeo's website</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="../Resources/css/normalize.min.css">
        <link rel="stylesheet" href="../Resources/css/main.css">
        <link rel="stylesheet" href="../Resources/css/utils.css">
        <script src="../Resources/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->
        <div class="center-ad">
            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <!-- BannerLboard -->
            <ins class="adsbygoogle"
                 style="display:inline-block;width:728px;height:90px"
                 data-ad-client="ca-pub-2318296776122737"
                 data-ad-slot="7080234403"></ins>
            <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
         </div>
        
        <div class="header-container">
            <header class="wrapper clearfix">       
                <div class="headerLogos">
                    <div class="headerLogoMain"> <img src="../Resources/img/logoMain.png" width="85" height="85"> </div>
                    <div class="headerTextHeading"> <img src="../Resources/img/textHeading.png" width="315" height="68"> </div>
                </div>
            </header>
        </div>
        <div class="mainMenu">
    <div class="header-container">
        <header class="wrapper clearfix">
            <nav>
                <ul>
                
                    <li class="menuButton"><a href="/index.html">home</a></li>
                
                    <li class="menuButton"><a href="/portfolio.html">portfolio</a></li>
                
                    <li class="menuButton"><a href="/projects.html">projects</a></li>
                
                    <li class="menuButton"><a href="/tutorials.html">tutorials</a></li>
                
                    <li class="menuButton"><a href="/stuff.html">stuff</a></li>
                
                </ul>
            </nav>                                      
        </header> 
    </div>
</div>     
        <div class="main-container">
            <div class="main wrapper clearfix">
                <article>
<script type="text/javascript"><!--
	google_ad_client = "ca-pub-2318296776122737";
	/* MainBanner */
	google_ad_slot = "6978227206";
	google_ad_width = 468;
	google_ad_height = 60;
	//-->
	</script>
	<script type="text/javascript"
	src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
	</script>
    
             
    
        <header>
	<div class="entryTitle"> 
		<h1>2d procedural level generation</h1>
	</div>
	<div class="entryText">
	    <p>My journey in figuring out how to generate interesting 2D environments.
				<hr></p>
	</div>
</header>     
    
        <section>
    <div class="entryTitle"> 
    	<h2>originally written on:<div class="blogDate">23 august 2012</div></h2> 
    </div>
    <div class="entryText">
    	<div class="blogEntry">
        	
				<br>
				<h3>Thoughts</h3>
				<p>I’ve always been a fan on procedural generation, not only for environments, but also for entities (enemies, items, weapons, etc.). However I don’t think at all the procedural generation is “better” than user-made content. Procedural generation works best when the entire game is designed around it, when level design doesn’t require a lot of creativity or when the elements are simple enough that any level will be fun to play. User-made content is still superior in most of the results, but it is obviously more consuming in terms of development times. Also, even though I never experimented with it a lot, I’ve always liked the idea of mixing user-made content with procedural generation. An example could be levels made up of user-made rooms attached together randomly. Something similar is modular item creation, like in Borderlands, where developers create a lot of pieces and then the system attaches them together randomly, creating interesting results. I think that procedural generation is a very powerful tool, it can help you save precious development time on content creation and also dramatically increase any game’s re-playability. I think it is suitable for any game genre, in one way or the other - it shouldn't be limited to roguelikes.</p>
				<br>
				<h3>My first tests</h3>
				<p>
				<img src="http://veegamedev.files.wordpress.com/2012/08/11.png"/>
				 <br>This probably was my first test, made in 2009. It is very simple, it generates empty rooms in a wall-filled 2d array, then carves a path from every center of the room to the other centers. It generated predictable and boring levels. It is an example of what not-to-do.<br>
				 <img src="http://veegamedev.files.wordpress.com/2012/08/2.png"/>
				 <br> This is the updated version. It still gives the same results, but stores rooms and paths in objects, so that you can collect and manipulate them more easily. It also creates walls around walkable tiles to make the levels look a little nicer. Then I experimented with field of view algorithms and other typical roguelike mechanics, and this prototype is what came out of it: <a href="http://www.youtube.com/watch?v=FyHrHb76lnY">http://www.youtube.com/watch?v=FyHrHb76lnY</a></p>
				<br>
				<h3>Moving on</h3>
				<p>I stopped experimenting with procedural generation after a while, and worked on other stuff. That’s when I started getting into a puzzle game, called DROD (Deadly Rooms of Death), which caught my attention for a lot of time, so I decided to make a clone of it.<br>
				<img src="http://veegamedev.files.wordpress.com/2012/08/drodrl-e1345686452808.png"/>
				<br> When suddenly it struck me – I’ll make a roguelike clone. I started working on a level generation library, this is the first video of it: <a href="http://www.youtube.com/watch?v=tbMcle88t3U">http://www.youtube.com/watch?v=tbMcle88t3U</a> The generation was still largely similar to the one of the previous video. I was however storing room outlines and rooms separately, so that I could easily add doors or pathways that didn’t start from the center. This next video shows how useful storing rooms in separate objects was – I added special tiles that prevented diagonal movement in random rooms: <a href="http://www.youtube.com/watch?v=9EEh0OJjKO4">http://www.youtube.com/watch?v=9EEh0OJjKO4</a> The last video shows why storing paths is also a good idea – I randomly added doors along paths to spice up levels: <a href="http://www.youtube.com/watch?v=QFMM4qtUbx4">http://www.youtube.com/watch?v=QFMM4qtUbx4</a></p>
				<br>
				<h3>Improving the generation</h3>
				<p>In 2011, I started experimenting with pathfinding. I had the idea of randomly generating levels by placing rooms around in a big open space, then pathfinding from the first one to the next one, until they were all connected. <br>
				<img src="http://veegamedev.files.wordpress.com/2012/08/3.png"/>
				<br> This was my first attempt: <a href="http://www.youtube.com/watch?v=Ve0s8109Erg">http://www.youtube.com/watch?v=Ve0s8109Erg</a> As you can see, it was slow. It also added doors on random room outline tiles. I improved it a bit later, rendering tiles with SFML.NET. Also added a simple player entity and basic collisions: <a href="http://www.youtube.com/watch?v=NDeM5oQyve8">http://www.youtube.com/watch?v=NDeM5oQyve8</a> This is much more interesting than the DROD Roguelike one, because it doesn’t create overlapping rooms and paths, which can lead to unintended solutions or simply bad-looking levels. The generated levels could also be retrieved as a connection of nodes <em>(a graph)</em>. This was incredibly useful, because you could actually write some clever code that automatically added keys and doors that were accessible only in a specific order and make levels less linear. his is still my favorite approach - it could also be sped up by using <strong>Jump Point Search</strong> instead of<strong> A*</strong>.</p>
				<br>
				<h3>VeeGen</h3>
				<p>I decided to create a library for easy 2d terrain generation. Code quality is not the best, considering it’s from late 2011, but its features are working and it’s easy to use in any project. It’s called VeeGen, and it is available on my GitHub page, along with a demo. Here’s how the API looks:</p>
				
<!-- HTML generated using hilite.me --><div style="background: #202020; overflow:auto;width:auto;color:white;background:black;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #6ab825; font-weight: bold">int</span> <span style="color: #d0d0d0">width</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">100</span><span style="color: #d0d0d0">;</span>
<span style="color: #6ab825; font-weight: bold">int</span> <span style="color: #d0d0d0">height</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">100</span><span style="color: #d0d0d0">;</span>
<span style="color: #6ab825; font-weight: bold">int</span> <span style="color: #d0d0d0">initialValue</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">;</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">world</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">VGWorld(width,</span> <span style="color: #d0d0d0">height,</span> <span style="color: #d0d0d0">initialValue);</span>
<span style="color: #999999; font-style: italic">// creates a world that contains a 2d array of tiles</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">area</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">VGArea(world,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">50</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">50</span><span style="color: #d0d0d0">);</span>
<span style="color: #999999; font-style: italic">// defines an area that goes from 0;0 to 50;50</span>
<span style="color: #6ab825; font-weight: bold">var</span> <span style="color: #d0d0d0">dungeonGenerator</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">VGGBSPDungeon(mSplits:</span> <span style="color: #3677a9">9</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">mCarveOffset:</span> <span style="color: #3677a9">1</span><span style="color: #d0d0d0">);</span>
<span style="color: #d0d0d0">dungeonGenerator.Generate(area);</span>
</pre></div>
			
				<p>There are three different generators in the library:</p>
				<ul>
				    <li><strong>BSPDungeon</strong>: generates a dungeon via binary space partitioning</li>
				    <li><strong>Cave</strong>: generates a cave using cellar automata</li>
				    <li><strong>Walker</strong>: uses “walkers”, entities that walk around the area, carving it and spawning rooms randomly</li>
				</ul>
				<p>In retrospect, the API could be highly improved, but the functionality is still there. I have a video explaining most of the features right here, check it out: <a href="http://www.youtube.com/watch?v=d0ByM6mkce4">http://www.youtube.com/watch?v=d0ByM6mkce4</a> The cool thing about VeeGen is that you can mix'n'match different generators. Areas allow you to use a generator in a certain part of the world, and another generator in another part. With some interesting code you could create dungeons with rooms filled of caves, for example. Or a large open world with dungeons and caves placed randomly But even more interesting is the fact that you can use more generators in the same area. You can see in the video <em>(and try it for yourself in the demo)</em> that it is possible to generate a dungeon on top of a cave, then, hypothetically, have some walkers carve some additional paths and rooms in the dungeon. The possibilities are endless, and creating custom generators shouldn't be hard at all.</p>
    	</div> 
	</div>
</section>      
    
</article>
<div class="asideWrapper">
	
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Aside2New -->
<ins class="adsbygoogle"
     style="display:inline-block;width:336px;height:280px"
     data-ad-client="ca-pub-2318296776122737"
     data-ad-slot="5463900409"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
	
	
	    
	
                    <aside>
                        <h3>contact me</h3>
                        <div class="socialIcons">
                            <div class="socialIcon">
                                <a href="mailto:vittorio.romeo@outlook.com" target="_blank"> 
                                    <img src="../Resources/img/socialEmail.png" width="45" height="45">
                                    <div class="socialIconGray"> <img src="../Resources/img/socialEmailGray.png" width="45" height="45"> </div>
                                </a>
                            </div>
                            <div class="socialIcon">
                                <a href="http://www.facebook.com/vittorioromeovee" target="_blank"> 
                                    <img src="../Resources/img/socialFacebook.png" width="45" height="45">
                                    <div class="socialIconGray"> <img src="../Resources/img/socialFacebookGray.png" width="45" height="45"> </div>
                                </a>
                            </div>
                            <div class="socialIcon">
                                <a href="https://github.com/SuperV1234" target="_blank"> 
                                    <img src="../Resources/img/socialGitHub.png" width="45" height="45">
                                    <div class="socialIconGray"> <img src="../Resources/img/socialGitHubGray.png" width="45" height="45"> </div>
                                </a>
                            </div>
                            <div class="socialIcon">
                                <a href="http://www.youtube.com/user/SuperVictorius" target="_blank"> 
                                    <img src="../Resources/img/socialYouTube.png" width="45" height="45">
                                    <div class="socialIconGray"> <img src="../Resources/img/socialYouTubeGray.png" width="45" height="45"> </div>
                                </a>
                            </div>
                            <div class="socialIcon">
                                <a href="https://twitter.com/supahvee1234" target="_blank"> 
                                    <img src="../Resources/img/socialTwitter.png" width="45" height="45">
                                    <div class="socialIconGray"> <img src="../Resources/img/socialTwitterGray.png" width="45" height="45"> </div>
                                </a>
                            </div>          
                            <div class="socialIcon">
                                <a href="http://stackexchange.com/users/294676/vittorio-romeo" target="_blank"> 
                                    <img src="../Resources/img/socialStackExchange.png" width="45" height="45">
                                    <div class="socialIconGray"> <img src="../Resources/img/socialStackExchangeGray.png" width="45" height="45"> </div>
                                </a>
                            </div>      
                        </div>
                    </aside>
                    <div>
                       <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="AJT3AXATV6LXL">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/it_IT/i/scr/pixel.gif" width="1" height="1">
</form>
	                    <!-- Place this tag where you want the +1 button to render. -->
						<div class="g-plusone"></div>
						<!-- Place this tag after the last +1 button tag. -->
						<script type="text/javascript">
						  (function() {
						    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
						    po.src = 'https://apis.google.com/js/plusone.js';
						    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
						  })();
						</script>
   
    <script type="text/javascript"><!--
    google_ad_client = "ca-pub-2318296776122737";
    /* AsideAd */
    google_ad_slot = "1071294409";
    google_ad_width = 250;
    google_ad_height = 250;
    //-->
    </script>
    <script type="text/javascript"
    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>
					</div>
                </div>
            </div>
        </div>
        
        <div class="footer-container">
            <footer class="wrapper">
                <p>vittorio romeo 2012 - 2014</p>
                
    
                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top"><input type="hidden" name="cmd" value="_s-xclick"><input type="hidden" name="hosted_button_id" value="3CDK85YJC3RAA"><input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"><img alt="" border="0" src="https://www.paypalobjects.com/it_IT/i/scr/pixel.gif" width="1" height="1"></form>
            
                <script type="text/javascript"><!--
    google_ad_client = "ca-pub-2318296776122737";
    /* MainBanner */
    google_ad_slot = "6978227206";
    google_ad_width = 468;
    google_ad_height = 60;
    //-->
    </script>
    <script type="text/javascript"
    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>
            </footer>
        </div>
        <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> -->
        <script>window.jQuery || document.write('<script src="../Resources/js/vendor/jquery-1.8.3.min.js"><\/script>')</script>
        <script src="../Resources/js/jquery.animate-colors-min.js"></script> <script src="../Resources/js/main.js"></script>
        <link rel="stylesheet" href="../Resources/js/styles/github.css">
        <script src="../Resources/js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-43376035-1', 'vittorioromeo.info');
		ga('send', 'pageview');
		</script>
    </body>
</html>
